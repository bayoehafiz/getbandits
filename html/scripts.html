<script>
function loadScript(url, callback) {
    var script = document.createElement("script")
    script.type = "text/javascript";
    if (script.readyState) { //IE
        script.onreadystatechange = function() {
            if (script.readyState == "loaded" || script.readyState == "complete") {
                script.onreadystatechange = null;
                callback();
            }
        };
    } else { //Others
        script.onload = function() {
            callback();
        };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
}

if (screen.size < 768) { // Load when on mobile only
    loadScript("http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js", function() {
        log('jquery.mobile-1.0.1.min.js loaded!');
    });
    loadScript("http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog2.js", function() {
        log('jquery.mobile.simpledialog2.js loaded!');
    });
}

(function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-66015969-1', 'auto');
ga('send', 'pageview');

function downloadJSAtOnload() {
    var element = document.createElement("script");
    if ($(window).width() > 768) {
        element.src = "scripts/main.js";
    } else {
        element.src = "scripts/mobile.js";
    }

    document.body.appendChild(element);
}
if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
else window.onload = downloadJSAtOnload;
</script>
<script>
// trigger button click
$('#btn-contact-us-desktop').click(function() {
    $('#contact-us-desktop').addClass('dialog--open');
})
$('#btn-contact-us-mobile').click(function() {
    $('#contact-us-mobile').addClass('dialog--open');
})

$('#contact-us-desktop > div.dialog__overlay').click(function() {
    var modal = $('#contact-us-desktop');
    if (modal.hasClass('dialog--open')) {
        modal.removeClass('dialog--open');
        modal.addClass('dialog__close');
    } else if (modal.hasClass('dialog__close')) {
        modal.removeClass('dialog--close');
        modal.addClass('open');
    }
})

$('#dialog__close').click(function() {
    var modal = $('#contact-us-mobile');
    if (modal.hasClass('dialog--open')) {
        modal.removeClass('dialog--open');
        modal.addClass('dialog__close');
    } else if (modal.hasClass('dialog__close')) {
        modal.removeClass('dialog--close');
        modal.addClass('open');
    }
})
</script>
